<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Pet - Parceiros</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script type="module">
    // Importando Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
  apiKey: "AIzaSyDVr6OOQRt2rB0kByInjqjdyoQCpnMAt7I",
  authDomain: "site-f6495.firebaseapp.com",
  projectId: "site-f6495",
  storageBucket: "site-f6495.firebasestorage.app",
  messagingSenderId: "230161402024",
  appId: "1:230161402024:web:462a911919ebf8a0809a9d",
  measurementId: "G-51G8XF6JH0"
};

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Aguardar carregamento da p√°gina
    window.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("partnerForm");

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        try {
          const parceiro = {
            cnpjcpf: document.getElementById("cnpjcpf").value,
            nomeEmpresa: document.getElementById("nomeEmpresa").value,
            telefoneEmpresa: document.getElementById("telefoneEmpresa").value,
            emailEmpresa: document.getElementById("emailEmpresa").value,
            responsavel: document.getElementById("responsavel").value,
            telefoneResponsavel: document.getElementById("telefoneResponsavel").value,
            emailResponsavel: document.getElementById("emailResponsavel").value,
            cep: document.getElementById("cep").value,
            rua: document.getElementById("rua").value,
            numero: document.getElementById("numero").value,
            bairro: document.getElementById("bairro").value,
            cidade: document.getElementById("cidade").value,
            estado: document.getElementById("estado").value,
            criadoEm: serverTimestamp() // üî• Data e hora autom√°ticas
          };

          await addDoc(collection(db, "parceiros"), parceiro);

          alert("‚úÖ Parceiro salvo com sucesso!");
          form.reset();

        } catch (error) {
          console.error("Erro ao salvar parceiro:", error);
          alert("‚ùå Erro ao salvar parceiro.");
        }
      });
    });
  </script>
</head>
<body>
  <!-- Sidebar -->
  <div style="width:250px; float:left; background:#2c3e50; height:100vh; color:white; padding:20px;">
    <h2>Admin Pet</h2>
    <ul style="list-style:none; padding:0;">
      <li><a href="index.html" style="color:white; text-decoration:none;"><i class="fas fa-home"></i> Dashboard</a></li>
      <li><a href="parceiros.html" style="color:white; text-decoration:none;"><i class="fas fa-handshake"></i> Parceiros</a></li>
      <li><a href="clientes.html" style="color:white; text-decoration:none;"><i class="fas fa-users"></i> Clientes</a></li>
      <li><a href="produtos.html" style="color:white; text-decoration:none;"><i class="fas fa-box"></i> Produtos</a></li>
      <li><a href="agendamentos.html" style="color:white; text-decoration:none;"><i class="fas fa-calendar"></i> Agendamentos</a></li>
    </ul>
  </div>

  <!-- Conte√∫do -->
  <div style="margin-left:260px; padding:20px;">
    <h1>Parceiros</h1>

    <!-- Bot√£o para abrir cadastro -->
    <button onclick="document.getElementById('modal').style.display='block'" style="padding:10px 20px; background:#3498db; color:white; border:none; border-radius:5px; cursor:pointer;">
      Cadastrar Parceiro
    </button>

    <!-- Modal -->
    <div id="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5);">
      <div style="background:white; width:500px; margin:50px auto; padding:20px; border-radius:8px; position:relative;">
        <span onclick="document.getElementById('modal').style.display='none'" style="position:absolute; top:10px; right:15px; cursor:pointer; font-size:20px;">&times;</span>
        
        <h2>Cadastrar Parceiro</h2>
        <form id="partnerForm">
          <label>CNPJ / CPF:</label>
          <input type="text" id="cnpjcpf" required style="width:100%; margin-bottom:10px;">
          
          <label>Nome da Empresa:</label>
          <input type="text" id="nomeEmpresa" required style="width:100%; margin-bottom:10px;">
          
          <label>Telefone da Empresa:</label>
          <input type="text" id="telefoneEmpresa" style="width:100%; margin-bottom:10px;">
          
          <label>Email da Empresa:</label>
          <input type="email" id="emailEmpresa" style="width:100%; margin-bottom:10px;">
          
          <label>Nome do Respons√°vel:</label>
          <input type="text" id="responsavel" required style="width:100%; margin-bottom:10px;">
          
          <label>Telefone do Respons√°vel:</label>
          <input type="text" id="telefoneResponsavel" style="width:100%; margin-bottom:10px;">
          
          <label>Email do Respons√°vel:</label>
          <input type="email" id="emailResponsavel" style="width:100%; margin-bottom:10px;">
          
          <label>CEP:</label>
          <input type="text" id="cep" required style="width:100%; margin-bottom:10px;">
          
          <label>Rua:</label>
          <input type="text" id="rua" required style="width:100%; margin-bottom:10px;">
          
          <label>N√∫mero:</label>
          <input type="text" id="numero" required style="width:100%; margin-bottom:10px;">
          
          <label>Bairro:</label>
          <input type="text" id="bairro" required style="width:100%; margin-bottom:10px;">
          
          <label>Cidade:</label>
          <input type="text" id="cidade" required style="width:100%; margin-bottom:10px;">
          
          <label>Estado:</label>
          <input type="text" id="estado" required style="width:100%; margin-bottom:10px;">
          
          <button type="submit" style="padding:10px 20px; background:#27ae60; color:white; border:none; border-radius:5px; cursor:pointer;">Salvar Parceiro</button>
        </form>
      </div>
    </div>
  </div>
</body>
</html>
