<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Pet Dudis - Início</title>

<!-- CSS globais -->
<link rel="stylesheet" href="style.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>

<style>
/* ====== Ajustes visuais ====== */
.acoes-usuario { position: relative; display:flex; gap:18px; align-items:center; font-size:0.95rem;}
.acoes-usuario a, .acoes-usuario span { color:#333; text-decoration:none; cursor:pointer; }
.acoes-usuario a:hover, .acoes-usuario span:hover { color:#5e2ca5; }

.usuario-logado { display:none; align-items:center; gap:8px; position:relative; }
.usuario-chip { display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; border:1px solid #e5e5e5; background:#fff; transition:box-shadow .2s ease, transform .05s ease; user-select:none; }
.usuario-chip:hover { box-shadow:0 6px 18px rgba(0,0,0,.08); }
.usuario-iniciais { width:28px; height:28px; border-radius:50%; display:flex; justify-content:center; align-items:center; background:#5e2ca5; color:#fff; font-weight:700; font-size:0.9rem;}
.usuario-nome { font-weight:700; }
.usuario-seta { margin-left:2px; transform:rotate(0deg); transition:transform .2s ease; font-size:.9rem; color:#777; }
.usuario-chip[aria-expanded="true"] .usuario-seta { transform:rotate(180deg); }

/* Painel lateral */
.painel-overlay { position:fixed; inset:0; background:rgba(0,0,0,.45); opacity:0; visibility:hidden; transition:.2s ease; z-index:1000; }
.painel-overlay.ativo { opacity:1; visibility:visible; }
.painel-cliente { position:fixed; top:0; right:0; width:min(92vw,360px); height:100vh; background:#fff; box-shadow:-10px 0 30px rgba(0,0,0,.15); transform:translateX(100%); transition:.25s ease; z-index:1001; display:flex; flex-direction:column; }
.painel-cliente.ativo { transform:translateX(0); }

.painel-topo { display:flex; gap:12px; align-items:center; padding:16px 18px; border-bottom:1px solid #f0f0f0; }
.painel-topo .foto { width:40px; height:40px; border-radius:50%; display:flex; justify-content:center; align-items:center; background:#5e2ca5; color:#fff; font-weight:700; }
.painel-topo .info { flex:1; }
.painel-topo .info .nome { font-weight:800; color:#333; line-height:1.15; }
.painel-topo .info .email { font-size:.85rem; color:#777; }
.painel-fechar { background:transparent; border:none; font-size:1.1rem; cursor:pointer; color:#666; }

.painel-lista { flex:1; overflow-y:auto; padding:10px 10px 18px; }
.secao { margin-top:12px; border:1px solid #efefef; border-radius:12px; overflow:hidden; }
.secao-titulo { padding:10px 12px; font-size:.85rem; font-weight:800; letter-spacing:.02em; color:#5e2ca5; background:#faf8ff; border-bottom:1px solid #efefef; }
.link-item { display:flex; align-items:center; gap:12px; text-decoration:none; color:#333; padding:12px 14px; border-bottom:1px solid #f5f5f5; }
.link-item:last-child { border-bottom:0; }
.link-item:hover { background:#f9f9ff; }
.link-item i { width:22px; text-align:center; color:#5e2ca5; }
.chip-role { margin-left:auto; font-size:.75rem; padding:3px 8px; border-radius:999px; font-weight:700; border:1px solid #dbe4ff; background:#eef3ff; color:#3556d1; }

.painel-rodape { padding:10px 12px 16px; display:flex; gap:8px; flex-wrap:wrap; }
.btn-sair, .btn-ir-area { display:inline-flex; align-items:center; gap:8px; padding:10px 12px; border-radius:10px; border:1px solid #eee; font-weight:700; cursor:pointer; }
.btn-ir-area { background:#5e2ca5; color:#fff; border-color:#5e2ca5; }
.btn-sair:hover { background:#f9f9f9; }
.btn-ir-area:hover { filter:brightness(0.97); }

/* Modal login */
.modal-login { display:none; position:fixed; z-index:1100; left:0; top:0; width:100%; height:100%; overflow:auto; background:rgba(0,0,0,0.6); }
.modal-login-content { background:#fff; margin:8% auto; padding:20px; border-radius:12px; width:90%; max-width:420px; position:relative; box-shadow:0 18px 50px rgba(0,0,0,.25);}
.modal-login-content h2{text-align:center;margin-bottom:20px;}
.modal-login-content input { width:100%; padding:12px; margin:6px 0; border:1px solid #ddd; border-radius:8px; }
.modal-login-content button { width:100%; padding:12px; margin:10px 0; background:#5e2ca5; color:#fff; border:none; border-radius:8px; cursor:pointer; font-weight:800;}
.modal-login-content .fechar { position:absolute; top:10px; right:15px; font-size:24px; cursor:pointer;}
.tab-login { display:flex; justify-content:space-around; margin-bottom:15px; cursor:pointer; }
.tab-login div { padding:10px 20px; border-bottom:2px solid transparent;}
.tab-login .ativo { border-bottom:2px solid #5e2ca5; font-weight:800; color:#5e2ca5; }

/* Foco acessível */
.usuario-chip:focus, .link-item:focus, .btn-sair:focus, .btn-ir-area:focus, .painel-fechar:focus { outline:2px solid #5e2ca5; outline-offset:2px;}
</style>
</head>
<body>

<!-- Cabeçalho -->
<header class="cabecalho">
<div class="cabecalho-conteudo">
  <div class="logo-container"><img src="img/logo.png" alt="Pet Dudis" class="logo"/></div>
  <div class="acoes-usuario">
    <a href="#"><i class="fas fa-sync-alt"></i> Recorrência</a>
    <a href="#"><i class="fas fa-box"></i> Pedidos</a>
    <span id="botao-login"><i class="fas fa-user"></i> Entrar | Cadastrar</span>
    <div class="usuario-logado" id="usuario-logado">
      <button class="usuario-chip" id="usuario-chip" aria-expanded="false" aria-controls="painel-cliente">
        <span class="usuario-iniciais" id="usuario-iniciais">U</span>
        <span class="usuario-nome" id="nome-usuario">Usuário</span>
        <i class="fa-solid fa-chevron-down usuario-seta"></i>
      </button>
    </div>
  </div>
</div>
</header>

<!-- Painel lateral -->
<div id="painel-overlay" class="painel-overlay" aria-hidden="true"></div>
<aside id="painel-cliente" class="painel-cliente" role="dialog" aria-modal="true">
  <div class="painel-topo">
    <div class="foto" id="painel-iniciais">U</div>
    <div class="info">
      <div class="nome" id="painel-nome">Usuário</div>
      <div class="email" id="painel-email">email@dominio.com</div>
    </div>
    <button class="painel-fechar" id="painel-fechar" aria-label="Fechar painel">
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>
  <div class="painel-lista" id="painel-lista">
    <div class="secao">
      <div class="secao-titulo">Área do Cliente</div>
      <a href="#" class="link-item"><i class="fas fa-gift"></i> Meus Benefícios</a>
      <a href="#" class="link-item"><i class="fas fa-box"></i> Meus Pedidos</a>
      <a href="#" class="link-item"><i class="fas fa-paw"></i> Meus Pets</a>
    </div>
    <div class="secao">
      <div class="secao-titulo">Administração</div>
      <a href="#" class="link-item"><i class="fas fa-users"></i> Parceiros <span class="chip-role">Admin</span></a>
      <a href="#" class="link-item"><i class="fas fa-cog"></i> Configurações</a>
    </div>
  </div>
  <div class="painel-rodape">
    <button class="btn-ir-area">Ir para Área</button>
    <button class="btn-sair" id="btn-sair">Sair</button>
  </div>
</aside>

<!-- Modal login -->
<div id="modal-login" class="modal-login">
  <div class="modal-login-content">
    <span class="fechar" id="fechar-modal">&times;</span>
    <h2>Login / Cadastro</h2>
    <div class="tab-login">
      <div class="ativo" data-tab="login">Login</div>
      <div data-tab="cadastro">Cadastro</div>
    </div>
    <input type="email" placeholder="E-mail" id="email-login"/>
    <input type="password" placeholder="Senha" id="senha-login"/>
    <button id="btn-login">Entrar</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// ===== Firebase =====
const firebaseConfig = {
  apiKey: "SEU_API_KEY",
  authDomain: "SEU_AUTH_DOMAIN",
  projectId: "SEU_PROJECT_ID",
  storageBucket: "SEU_STORAGE_BUCKET",
  messagingSenderId: "SEU_SENDER_ID",
  appId: "SEU_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// ===== Seletores =====
const botaoLogin = document.getElementById('botao-login');
const usuarioLogado = document.getElementById('usuario-logado');
const usuarioChip = document.getElementById('usuario-chip');
const painel = document.getElementById('painel-cliente');
const overlay = document.getElementById('painel-overlay');
const painelFechar = document.getElementById('painel-fechar');
const btnSair = document.getElementById('btn-sair');
const modalLogin = document.getElementById('modal-login');
const fecharModal = document.getElementById('fechar-modal');

// ===== Funções =====
function abrirPainel(){
  painel.classList.add('ativo');
  overlay.classList.add('ativo');
  usuarioChip.setAttribute('aria-expanded','true');
}
function fecharPainel(){
  painel.classList.remove('ativo');
  overlay.classList.remove('ativo');
  usuarioChip.setAttribute('aria-expanded','false');
}

// ===== Eventos =====
botaoLogin.addEventListener('click',()=>modalLogin.style.display='block');
fecharModal.addEventListener('click',()=>modalLogin.style.display='none');
window.addEventListener('click',(e)=>{ if(e.target==modalLogin) modalLogin.style.display='none'; });
usuarioChip.addEventListener('click',()=> painel.classList.contains('ativo')?fecharPainel():abrirPainel());
painelFechar.addEventListener('click',fecharPainel);
overlay.addEventListener('click',fecharPainel);
btnSair.addEventListener('click',()=>{
  auth.signOut().then(()=>location.reload());
});

// ===== Auth Listener =====
auth.onAuthStateChanged(user=>{
  if(user){
    botaoLogin.style.display='none';
    usuarioLogado.style.display='flex';
    const iniciais = user.displayName?user.displayName.match(/\b\w/g).join('').toUpperCase():'U';
    document.getElementById('usuario-iniciais').textContent = iniciais;
    document.getElementById('nome-usuario').textContent = user.displayName||'Usuário';
    document.getElementById('painel-nome').textContent = user.displayName||'Usuário';
    document.getElementById('painel-email').textContent = user.email;
    document.getElementById('painel-iniciais').textContent = iniciais;
  } else {
    botaoLogin.style.display='inline-flex';
    usuarioLogado.style.display='none';
  }
});

// ===== Login =====
document.getElementById('btn-login').addEventListener('click',()=>{
  const email = document.getElementById('email-login').value;
  const senha = document.getElementById('senha-login').value;
  auth.signInWithEmailAndPassword(email,senha)
  .then(()=>modalLogin.style.display='none')
  .catch(err=>alert(err.message));
});
</script>

</body>
</html>
